<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VR Canvas - Infinite Whiteboard</title>
    <link rel="stylesheet" href="style.css">
    <!-- Fabric.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
</head>

<body>

    <!-- Loader -->
    <div id="loader">Loading Canvas...</div>

    <!-- Main Canvas -->
    <div id="canvas-container">
        <canvas id="c"></canvas>
    </div>

    <!-- Utility Bar (Zoom, Undo, Save) -->
    <div class="utility-bar">
        <button class="util-btn" id="btn-undo" title="Undo">
            <svg viewBox="0 0 24 24" width="24" height="24">
                <path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.12 0 5.62 1.41 7.15 3.61c.45-.63.81-1.3.81-1.3 ... wait, simpler checkmark or icon path -->
      <path d=" M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6
                    5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" fill="currentColor" />
            </svg>
        </button>
        <button class="util-btn" id="btn-redo" title="Redo">
            <svg viewBox="0 0 24 24" width="24" height="24">
                <path
                    d="M18.4 10.6C16.55 9 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"
                    fill="currentColor" />
            </svg>
        </button>
        <button class="util-btn" id="btn-save" title="Save">
            <svg viewBox="0 0 24 24" width="24" height="24">
                <path
                    d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"
                    fill="currentColor" />
            </svg>
        </button>
        <button class="util-btn" id="btn-paste" title="Paste Image/Text">
            <svg viewBox="0 0 24 24" width="24" height="24">
                <path
                    d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"
                    fill="currentColor" />
            </svg>
        </button>
        <button class="util-btn" id="btn-darkmode" title="Toggle Theme">
            <svg viewBox="0 0 24 24" width="24" height="24">
                <path
                    d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"
                    fill="currentColor" />
            </svg>
        </button>
        <button class="util-btn" id="btn-calc" title="Calculator">
            <svg viewBox="0 0 24 24" width="24" height="24">
                <path
                    d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 14H7v-2h6v2zm4-2h-2v-2h2v2zm-4-4H7V9h6v2zm4 0h-2V9h2v2z"
                    fill="currentColor" />
            </svg>
        </button>
    </div>

    <!-- Calculator Panel -->
    <div class="calculator-panel" id="calculator-panel">
        <input type="text" id="calc-display" readonly value="0">
        <div class="calc-keys">
            <button class="calc-btn op" data-action="clear">C</button>
            <button class="calc-btn op" data-action="/">÷</button>
            <button class="calc-btn op" data-action="*">×</button>
            <button class="calc-btn op" data-action="back">⌫</button>

            <button class="calc-btn num" data-val="7">7</button>
            <button class="calc-btn num" data-val="8">8</button>
            <button class="calc-btn num" data-val="9">9</button>
            <button class="calc-btn op" data-action="-">-</button>

            <button class="calc-btn num" data-val="4">4</button>
            <button class="calc-btn num" data-val="5">5</button>
            <button class="calc-btn num" data-val="6">6</button>
            <button class="calc-btn op" data-action="+">+</button>

            <button class="calc-btn num" data-val="1">1</button>
            <button class="calc-btn num" data-val="2">2</button>
            <button class="calc-btn num" data-val="3">3</button>
            <button class="calc-btn equals" data-action="=">=</button>

            <button class="calc-btn num zero" data-val="0">0</button>
            <button class="calc-btn num" data-val=".">.</button>
        </div>
    </div>

    <!-- Properties Panel -->
    <div class="properties-panel" id="properties-panel">
        <div class="prop-row">
            <span>Color</span>
            <div id="color-palette" style="display:flex; gap:8px;"></div>
        </div>
        <div class="prop-row">
            <span>Size</span>
            <input type="range" id="stroke-width" min="1" max="50" value="3">
        </div>
        <div class="prop-row">
            <label style="display:flex; align-items:center; gap:8px; cursor:pointer; font-size: 14px;">
                <input type="checkbox" id="stroke-dashed"
                    style="width:20px; height:20px; accent-color: var(--accent-color);">
                <span>Dashed</span>
            </label>
        </div>
    </div>

    <!-- Main Toolbar -->
    <div class="toolbar">
        <button class="tool-btn active" id="tool-pan" title="Pan / Select">
            <svg viewBox="0 0 24 24">
                <path
                    d="M9 3L5 6.29v6.34L3 14.06V3h6zm12 5v11h-5l1-4h-2l-1 4h-5v-1l4-1.22V10h-2V8.5h5.45L15.3 4h4.4l1.3 4z"
                    fill="none" />
                <path
                    d="M13.64 21.97c-.18 0-.36-.05-.53-.16l-3.32-2.22-2.11 3.16c-.32.48-.96.61-1.44.29l-.85-.57c-.48-.32-.61-.96-.29-1.44l2.11-3.16-2.22-3.32c-.34-.51-.13-1.21.46-1.41l11.41-3.8c.61-.2 1.23.27 1.2.91l-1.38 11.23c-.06.56-.63.92-1.18.92-.09 0-.17-.01-.26-.03z"
                    fill="currentColor" />
        </button>
        <button class="tool-btn" id="tool-pen" title="Freehand Pen">
            <svg viewBox="0 0 24 24">
                <path
                    d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
                    fill="currentColor" />
            </svg>
        </button>
        <button class="tool-btn" id="tool-highlighter" title="Highlighter">
            <svg viewBox="0 0 24 24">
                <path
                    d="M18.5 2.5c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5H5.5C4.67 10.5 4 9.83 4 9V4c0-.83.67-1.5 1.5-1.5h13zm-13 18c0 .83.67 1.5 1.5 1.5h10c.83 0 1.5-.67 1.5-1.5v-2H5.5v2zM5.5 16h13v-2.5h-13V16z"
                    fill="currentColor" />
            </svg>
        </button>
        <button class="tool-btn" id="tool-eraser" title="Eraser (Delete)">
            <svg viewBox="0 0 24 24">
                <path
                    d="M15.14 3c-.51 0-1.02.2-1.41.59L2.59 14.73c-.78.78-.78 2.05 0 2.83L5.43 20.4c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l11.14-11.14c.78-.78.78-2.05 0-2.83l-2.83-2.83c-.39-.39-.91-.59-1.42-.59zM9 16l-3-3 8-8 3 3-8 8z"
                    fill="currentColor" />
            </svg>
        </button>
        <span style="width:1px; background:rgba(255,255,255,0.1); margin:0 4px;"></span>
        <button class="tool-btn" id="tool-shape-rect" title="Rectangle">
            <svg viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" fill="none" />
            </svg>
        </button>
        <button class="tool-btn" id="tool-shape-circle" title="Circle">
            <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" fill="none" />
            </svg>
        </button>
        <button class="tool-btn" id="tool-shape-line" title="Line">
            <svg viewBox="0 0 24 24">
                <path d="M3 21L21 3" stroke="currentColor" stroke-width="2" fill="none" />
            </svg>
        </button>
    </div>

    <script src="app.js"></script>
</body>

</html>